<% content_for :head do %>

  <script type="text/javascript" src="/javascripts/stream_layers.js"></script>
  <%= stylesheet_link_tag "jquery-ui" %> 

<% end %>
<div class="content">
<div class="page-header">
  <div class="row show-grid">
     <div class="span6"> 
       <h1 class="subhead">GHDx Streamgraph</h1>
       <h4>Datasets catalogued in the Global Health Data Exchange by datatype.</h4>
     </div>
     <div class="span4">
       <span id="type-label">This is some text.</span>
     </div>
     <div class="type-definition">
     </div>
  </div>
</div>


<div class="row show-grid">


  <div class="span2" style="width:120px">

    <div class="row show-grid">

      <div class="span2 side-things">

        <h3>Enter a Country Name</h3>

      </div>

      <div class="span2 side-things"> 
          <div id="form-status">
            <form id="countryform">
                <input name="countrybox" autocomplete="off" id="countrybox" type="text" data-provide="typeahead" class="span2"></input>
                <input class="btn" type="submit" value="Submit" /></input>
            </form>             
          </div>

          <div id="loading-gif" class="span2 side-things">
            <%= image_tag "loading.gif" %>
          </div>

          <div id="reset-btn" class="span2 side-things">
            <form id="reset-button">
              <input class="btn btn-success" type="submit" value="All Datasets"></input>
            </form>
          </div> 

      </div>

    </div>

  </div>


  <div id="chart-container" class="span10">

    <div id="chart">

      <div id="chart-title">

        <h1>All Datasets</h1>
        <h2 id="years-selected"></h2>

      </div>

      <div id="chart-goes-here">
      </div>
   
      <div id="range-slider">         
        <%= javascript_include_tag "range-slider" %>        
      </div>

    </div>

  </div>

  <%= javascript_tag :id => "Definitions" do %>
    
    var definitions_array =
    {"types" :[
    {"label": "Administrative Records – Financial", "definition": "Financial data of organizations and governments."}, 
    {"label": "Administrative Records – Operational", "definition": "Data concerning the operations of organizations and governments"}, 
    {"label": "Census", "definition": "The procedure of systematically acquiring and recording information about the members of a given population. It is a regularly occurring and official count of a particular population."}, 
    {"label": "Common Indicator", "definition": "Indicator data."}, 
    {"label": "Estimate", "definition": "Data that is abtracted in a manner from its original collection. Does not include microdata."}, 
    {"label": "Health Records", "definition": "Hospital data."}, 
    {"label": "Journal Article", "definition": "A work written for the purpose of propagating research."}, 
    {"label": "Multisource", "definition": "Data that is abstract or collected from multiple sources. Confusing? You bet! :D"}, 
    {"label": "Registry", "definition": "A systematic, centralized collection of data, often concerning a particular disease (e.g. cancer)."}, 
    {"label": "Report", "definition": "Reports that serve as datasets, as well as documentation."}, 
    {"label": "Research Archive", "definition": "An archive of data."}, 
    {"label": "Results Data", "definition": "Results from a study."}, 
    {"label": "Surveillance System", "definition": "Data available from an epidemiological surveillance system."},
    {"label": "Survey - Facility", "definition": "A survey that collects data from facility personnel."}, 
    {"label": "Survey - Household", "definition": "A survey that collects data from individuals or households"}, 
    {"label": "Tool", "definition": "Software that is of use for data analysis."}, 
    {"label": "Vital Registration", "definition": "Data concerning the vital events of a country's citizens and residents."}
    ]  }
  
  <% end %>

</div>
</div>


<%#$('#type-label').fadeOut('fast').animate({%>
            <%#'padding': '0px'%>
            <%#}, {duration: 'slow', queue: false}, function() {%>
            <%#// Animation complete.%>
            <%#});%>

<%#$('#type-label').fadeIn('fast').animate({%>
            <%#'padding': '20px'%>
            <%#}, {duration: 'slow', queue: false}, function() {%>
            <%#// Animation complete.%>
  <%#});%>
<%#[%>
